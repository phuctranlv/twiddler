<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html(`<button id="refresh"><h1>Show New Tweets</h1></button>`);

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          var tweetContent = '<b id="' + tweet.user + '"> @' + tweet.user + '</b>: ' + tweet.message;
          $tweet.html(tweetContent);
          $tweet.appendTo($body);
          var $tweet = $('<div class="timestamp"></div>');
          $tweet.text(tweet.created_at);
          $tweet.appendTo($body);
          index -= 1;
        }

        var index = streams.home.length - 1;
        document.getElementById('refresh').onclick = function refresh() {
          var tempIndex = streams.home.length - 1;
          if (tempIndex !== index) {
            index = streams.home.length - 1;
            var tweet = streams.home[index];
            var $tweetTimestamp = $('<div class="timestamp"></div>');
            $tweetTimestamp.text(tweet.created_at);
            $tweetTimestamp.insertAfter('button');
            var $tweet = $('<div class="tweet"></div>');
            var tweetContent = '<b id="' + tweet.user + '"> @' + tweet.user + '</b>: ' + tweet.message;
            $tweet.html(tweetContent);
            $tweet.insertAfter('button');
          }
        }
      });

    </script>
  </body>
</html>
